<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Receita Médica</title>
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        body {
            font-family: Arial, sans-serif;
            font-size: 12pt;
            line-height: 1.4;
            color: #000;
            margin: 0;
            padding: 0;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 1px solid #ccc;
            padding-bottom: 15px;
        }
        .clinic-name {
            font-size: 18pt;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .clinic-info {
            font-size: 10pt;
            color: #555;
            margin-bottom: 15px;
        }
        .patient-section {
            margin-bottom: 25px;
            font-size: 12pt;
        }
        .via-section {
            margin-bottom: 20px;
            font-weight: bold;
            font-size: 12pt;
        }
        .prescription-item {
            margin-bottom: 15px;
            font-size: 12pt;
        }
        .medication-number {
            font-weight: bold;
        }
        .medication-name {
            display: inline-block;
            width: 250px;
            border-bottom: 1px dotted #000;
            margin-right: 10px;
        }
        .medication-quantity {
            font-size: 11pt;
        }
        .posology {
            margin-left: 20px;
            font-size: 11pt;
            margin-top: 3px;
        }
        .signature-section {
            margin-top: 60px;
            text-align: center;
        }
        .doctor-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        .crm-info {
            margin-bottom: 10px;
        }
        .signature-image {
            margin: 10px 0;
        }
        .logo-section {
            text-align: center;
            margin-bottom: 40px;
            border-bottom: 2px solid #333;
            padding-bottom: 20px;
        }
        .logo-image {
            width: 150px;
            height: auto;
            margin-bottom: 15px;
        }
        .clinic-address {
            font-size: 10pt;
            color: #666;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="logo-section">
        <svg class="logo-image" viewBox="0 0 200 80" xmlns="http://www.w3.org/2000/svg">
            <text x="100" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">Grupo</text>
            <text x="100" y="55" text-anchor="middle" font-family="Arial, sans-serif" font-size="28" font-weight="bold" fill="#000">VIDAH</text>
        </svg>
        <div class="clinic-address">
            Endereço: R. XV de Novembro, 594 - Centro, Ibitinga - SP, 14940-000<br>
            Telefone: (16) 3342-4768
        </div>
    </div>
    
    <div class="patient-section">
        <strong>Paciente:</strong> {{ nome_paciente }}
    </div>
    
    <div class="via-section">
        Via {{ vias[0] if vias else 'Oral' }}
    </div>
    
    <div class="prescription-content">
        {% for medicamento, posologia, duracao, via in zip(medicamentos, posologias, duracoes, vias) %}
        <div class="prescription-item">
            <div style="margin-bottom: 8px;">
                <span style="font-weight: bold; font-size: 13pt;">{{ medicamento }}</span>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                <span class="medication-number">{{ loop.index }}) Genérico</span>
                <span style="border-bottom: 1px dotted #000; flex-grow: 1; margin: 0 20px; height: 1px;"></span>
                <span class="medication-quantity">{{ duracao }}</span>
            </div>
            <div class="posology">- {{ posologia }}</div>
        </div>
        {% endfor %}
    </div>
    
    <div class="signature-section">
        {% if assinatura and assinatura != 'assinatura' %}
        <div class="signature-image">
            <img src="data:image/png;base64,{{ assinatura }}" alt="Assinatura Digital" style="max-width: 150px; max-height: 50px; margin-bottom: 10px;">
        </div>
        {% else %}
        <div style="height: 60px; margin-bottom: 10px;">
            <svg width="120" height="40" xmlns="http://www.w3.org/2000/svg">
                <path d="M10 30 Q 30 10, 50 25 Q 70 35, 90 20 Q 100 15, 110 25" stroke="#0066cc" stroke-width="2" fill="none"/>
            </svg>
        </div>
        {% endif %}
        <div class="doctor-name">{{ medico }}</div>
        <div class="crm-info">CRM {{ crm }}</div>
        <div style="font-size: 10pt; margin-top: 10px;">Assinatura digital</div>
    </div>
</body>
</html>
