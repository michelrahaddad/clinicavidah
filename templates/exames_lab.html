{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-12">
            <h1 class="mb-4 page-title">
                <i class="fas fa-flask me-3 text-success"></i>
                <span class="gradient-text">Exames Laboratoriais</span>
            </h1>
            <p class="text-muted mb-4">Solicite exames laboratoriais organizados por especialidade médica</p>
        </div>
    </div>
    
    <div class="row">
        <div class="col-12">
            <div class="card glass-card">
                <div class="card-header">
                    <h5 class="mb-0 text-light">
                        <i class="fas fa-clipboard-list me-2 text-success"></i>
                        Solicitação de Exames Laboratoriais
                    </h5>
                </div>
                
                <div class="card-body">
                    <form method="POST" action="{{ url_for('exames_lab.salvar_exames_lab') }}">
                        <!-- Patient Name -->
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <label for="nome_paciente" class="form-label text-light">Nome do Paciente</label>
                                <input type="text" class="form-control glass-input" 
                                       id="nome_paciente" name="nome_paciente" 
                                       value="{{ exame.nome_paciente if refazer else (request.args.get('paciente', '') or nome_paciente) }}"
                                       placeholder="Digite o nome do paciente" required>
                            </div>
                            <div class="col-md-6">
                                <label for="data" class="form-label text-light">Data</label>
                                <input type="date" class="form-control glass-input" 
                                       id="data" name="data" 
                                       value="{{ exame.data if refazer and exame else '' }}" required>
                            </div>
                        </div>
                        
                        <!-- Search Box and Manage Exams -->
                        <div class="row mb-4">
                            <div class="col-10">
                                <div class="input-group">
                                    <span class="input-group-text glass-input">
                                        <i class="fas fa-search text-primary"></i>
                                    </span>
                                    <input type="text" class="form-control glass-input" 
                                           id="examSearch" placeholder="Buscar exame específico...">
                                </div>
                            </div>
                            <div class="col-2">
                                <button type="button" class="btn btn-outline-info neural-btn w-100" 
                                        onclick="abrirModalExamesPersonalizados()" 
                                        title="Gerenciar Exames Personalizados">
                                    <i class="fas fa-plus-circle"></i>
                                </button>
                            </div>
                        </div>

                        <div class="row">
                            {% set exames_selecionados = exame.exames.split(',') if refazer and exame and exame.exames else [] %}
                            {% set exames_pre_selecionados = [
                                'Hemograma completo',
                                'Coagulograma (TAP/TTPA)',
                                'HbA1c (Hemoglobina glicada)',
                                'Glicemia de jejum',
                                'TGO (AST)',
                                'TGP (ALT)',
                                'Ureia',
                                'Creatinina',
                                'Ferritina',
                                'Colesterol total e frações',
                                'Triglicerídeos',
                                'Ácido úrico',
                                'Proteína C reativa (PCR)',
                                'T4 livre',
                                'TSH',
                                'Testosterona total',
                                'FSH',
                                'Exame de urina (EAS)',
                                'Urina 1',
                                'PSA'
                            ] %}
                            
                            <!-- Hematologia -->
                            <div class="col-md-6 mb-4">
                                <h6 class="text-primary mb-3">
                                    <i class="fas fa-tint me-2"></i>Hematologia
                                </h6>
                                <div class="row">
                                    {% for exame_nome in ['Hemograma completo', 'VHS (Velocidade de hemossedimentação)', 'Coagulograma (TAP/TTPA)', 'Tempo de sangramento', 'Contagem de plaquetas'] %}
                                    <div class="col-12 mb-2">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="exames[]" 
                                                   value="{{ exame_nome }}" 
                                                   id="exame_hema_{{ loop.index }}"
                                                   {{ 'checked' if (refazer and exame_nome in exames_selecionados) or (not refazer and exame_nome in exames_pre_selecionados) else '' }}>
                                            <label class="form-check-label text-light" for="exame_hema_{{ loop.index }}">
                                                {{ exame_nome }}
                                            </label>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                            
                            <!-- Bioquímica -->
                            <div class="col-md-6 mb-4">
                                <h6 class="text-success mb-3">
                                    <i class="fas fa-atom me-2"></i>Bioquímica
                                </h6>
                                <div class="row">
                                    {% for exame_nome in ['Glicemia de jejum', 'Colesterol total e frações', 'Triglicerídeos', 'Ureia', 'Creatinina', 'Ácido úrico', 'TGO (AST)', 'TGP (ALT)', 'Bilirrubinas', 'Proteínas totais e frações', 'HbA1c (Hemoglobina glicada)', 'Ferro sérico', 'Ferritina', 'Proteína C reativa (PCR)'] %}
                                    <div class="col-12 mb-2">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="exames[]" 
                                                   value="{{ exame_nome }}" 
                                                   id="exame_bio_{{ loop.index }}"
                                                   {{ 'checked' if (refazer and exame_nome in exames_selecionados) or (not refazer and exame_nome in exames_pre_selecionados) else '' }}>
                                            <label class="form-check-label text-light" for="exame_bio_{{ loop.index }}">
                                                {{ exame_nome }}
                                            </label>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                            
                            <!-- Endocrinologia -->
                            <div class="col-md-6 mb-4">
                                <h6 class="text-info mb-3">
                                    <i class="fas fa-dna me-2"></i>Endocrinologia
                                </h6>
                                <div class="row">
                                    {% for exame_nome in ['TSH', 'T4 livre', 'Cortisol', 'Testosterona total', 'Testosterona livre', 'FSH', 'Estradiol', 'Progesterona sérica', 'Insulina', 'Prolactina'] %}
                                    <div class="col-12 mb-2">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="exames[]" 
                                                   value="{{ exame_nome }}" 
                                                   id="exame_endo_{{ loop.index }}"
                                                   {{ 'checked' if (refazer and exame_nome in exames_selecionados) or (not refazer and exame_nome in exames_pre_selecionados) else '' }}>
                                            <label class="form-check-label text-light" for="exame_endo_{{ loop.index }}">
                                                {{ exame_nome }}
                                            </label>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                            
                            <!-- Urologia/Nefrologia -->
                            <div class="col-md-6 mb-4">
                                <h6 class="text-warning mb-3">
                                    <i class="fas fa-kidneys me-2"></i>Urologia/Nefrologia
                                </h6>
                                <div class="row">
                                    {% for exame_nome in ['Exame de urina (EAS)', 'Urina 1', 'Urocultura', 'PSA', 'Clearance de creatinina', 'Proteinúria 24h'] %}
                                    <div class="col-12 mb-2">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="exames[]" 
                                                   value="{{ exame_nome }}" 
                                                   id="exame_uro_{{ loop.index }}"
                                                   {{ 'checked' if (refazer and exame_nome in exames_selecionados) or (not refazer and exame_nome in exames_pre_selecionados) else '' }}>
                                            <label class="form-check-label text-light" for="exame_uro_{{ loop.index }}">
                                                {{ exame_nome }}
                                            </label>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                            
                            <!-- Gastroenterologia -->
                            <div class="col-md-6 mb-4">
                                <h6 class="text-danger mb-3">
                                    <i class="fas fa-stomach me-2"></i>Gastroenterologia
                                </h6>
                                <div class="row">
                                    {% for exame_nome in ['Exame de fezes', 'Parasitológico de fezes', 'Coprocultura', 'Sangue oculto nas fezes', 'Elastase fecal'] %}
                                    <div class="col-12 mb-2">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="exames[]" 
                                                   value="{{ exame_nome }}" 
                                                   id="exame_gastro_{{ loop.index }}"
                                                   {{ 'checked' if (refazer and exame_nome in exames_selecionados) or (not refazer and exame_nome in exames_pre_selecionados) else '' }}>
                                            <label class="form-check-label text-light" for="exame_gastro_{{ loop.index }}">
                                                {{ exame_nome }}
                                            </label>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                            
                            <!-- Oncologia/Marcadores -->
                            <div class="col-md-6 mb-4">
                                <h6 class="text-secondary mb-3">
                                    <i class="fas fa-ribbon me-2"></i>Oncologia/Marcadores
                                </h6>
                                <div class="row">
                                    {% for exame_nome in ['PSA (Antígeno prostático específico)', 'CEA', 'CA 19-9', 'CA 125', 'AFP (Alfa-fetoproteína)', 'Beta HCG'] %}
                                    <div class="col-12 mb-2">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="exames[]" 
                                                   value="{{ exame_nome }}" 
                                                   id="exame_onco_{{ loop.index }}"
                                                   {{ 'checked' if (refazer and exame_nome in exames_selecionados) or (not refazer and exame_nome in exames_pre_selecionados) else '' }}>
                                            <label class="form-check-label text-light" for="exame_onco_{{ loop.index }}">
                                                {{ exame_nome }}
                                            </label>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                            
                            <!-- Imunologia/Reumatologia -->
                            <div class="col-md-6 mb-4">
                                <h6 class="text-light mb-3">
                                    <i class="fas fa-shield-alt me-2"></i>Imunologia/Reumatologia
                                </h6>
                                <div class="row">
                                    {% for exame_nome in ['FAN (Fator antinuclear)', 'Fator reumatoide', 'Anti-CCP', 'Complemento C3 e C4', 'Anti-DNA'] %}
                                    <div class="col-12 mb-2">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="exames[]" 
                                                   value="{{ exame_nome }}" 
                                                   id="exame_imuno_{{ loop.index }}"
                                                   {{ 'checked' if (refazer and exame_nome in exames_selecionados) or (not refazer and exame_nome in exames_pre_selecionados) else '' }}>
                                            <label class="form-check-label text-light" for="exame_imuno_{{ loop.index }}">
                                                {{ exame_nome }}
                                            </label>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                            
                            <!-- Sorologias Virais -->
                            <div class="col-md-6 mb-4">
                                <h6 class="text-primary mb-3">
                                    <i class="fas fa-virus me-2"></i>Sorologias Virais
                                </h6>
                                <div class="row">
                                    {% for exame_nome in ['HBsAg', 'Anti-HBs', 'HCV', 'Anti-HCV', 'HIV (Anti-HIV)', 'HTLV I/II', 'Citomegalovírus IgG e IgM'] %}
                                    <div class="col-12 mb-2">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="exames[]" 
                                                   value="{{ exame_nome }}" 
                                                   id="exame_viral_{{ loop.index }}"
                                                   {{ 'checked' if (refazer and exame_nome in exames_selecionados) or (not refazer and exame_nome in exames_pre_selecionados) else '' }}>
                                            <label class="form-check-label text-light" for="exame_viral_{{ loop.index }}">
                                                {{ exame_nome }}
                                            </label>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                            
                            <!-- Sorologias Bacterianas/Parasitárias -->
                            <div class="col-md-6 mb-4">
                                <h6 class="text-warning mb-3">
                                    <i class="fas fa-bacterium me-2"></i>Sorologias Bacterianas/Parasitárias
                                </h6>
                                <div class="row">
                                    {% for exame_nome in ['VDRL', 'FTA-ABS', 'Sorologia Chagas', 'Sorologia Toxoplasmose IgG e IgM', 'Sorologia Rubéola IgG e IgM', 'Sorologia para Hepatite A'] %}
                                    <div class="col-12 mb-2">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="exames[]" 
                                                   value="{{ exame_nome }}" 
                                                   id="exame_bact_{{ loop.index }}"
                                                   {{ 'checked' if (refazer and exame_nome in exames_selecionados) or (not refazer and exame_nome in exames_pre_selecionados) else '' }}>
                                            <label class="form-check-label text-light" for="exame_bact_{{ loop.index }}">
                                                {{ exame_nome }}
                                            </label>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                            
                            <!-- Tireoide -->
                            <div class="col-md-6 mb-4">
                                <h6 class="text-info mb-3">
                                    <i class="fas fa-lungs me-2"></i>Tireoide
                                </h6>
                                <div class="row">
                                    {% for exame_nome in ['TSH', 'T4 livre', 'T3', 'Anti-TPO', 'Anti-tireoglobulina', 'Tireoglobulina'] %}
                                    <div class="col-12 mb-2">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="exames[]" 
                                                   value="{{ exame_nome }}" 
                                                   id="exame_tir_{{ loop.index }}"
                                                   {{ 'checked' if (refazer and exame_nome in exames_selecionados) or (not refazer and exame_nome in exames_pre_selecionados) else '' }}>
                                            <label class="form-check-label text-light" for="exame_tir_{{ loop.index }}">
                                                {{ exame_nome }}
                                            </label>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                            
                            <!-- Vitaminas -->
                            <div class="col-md-6 mb-4">
                                <h6 class="text-success mb-3">
                                    <i class="fas fa-pills me-2"></i>Vitaminas
                                </h6>
                                <div class="row">
                                    {% for exame_nome in ['Vitamina B12', 'Vitamina D', 'Ácido fólico', 'Vitamina A', 'Vitamina E'] %}
                                    <div class="col-12 mb-2">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="exames[]" 
                                                   value="{{ exame_nome }}" 
                                                   id="exame_vit_{{ loop.index }}"
                                                   {{ 'checked' if (refazer and exame_nome in exames_selecionados) or (not refazer and exame_nome in exames_pre_selecionados) else '' }}>
                                            <label class="form-check-label text-light" for="exame_vit_{{ loop.index }}">
                                                {{ exame_nome }}
                                            </label>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                            
                            <!-- Exames Personalizados -->
                            <div class="col-12 mb-4">
                                <h6 class="text-warning mb-3">
                                    <i class="fas fa-user-cog me-2"></i>Exames Personalizados
                                </h6>
                                <div id="examesPersonalizadosContainer" class="row">
                                    <!-- Exames personalizados serão carregados aqui via JavaScript -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Submit Button -->
                        <div class="row mt-4">
                            <div class="col-12 d-flex justify-content-between">
                                <a href="{{ url_for('dashboard.dashboard') }}" class="btn neural-btn px-4 py-2" style="border-radius: 15px; font-weight: 600; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; color: white;">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="me-2" style="margin-top: -2px;">
                                        <rect x="3" y="3" width="7" height="7" rx="1" fill="white" opacity="0.9"/>
                                        <rect x="14" y="3" width="7" height="7" rx="1" fill="white" opacity="0.9"/>
                                        <rect x="3" y="14" width="7" height="7" rx="1" fill="white" opacity="0.9"/>
                                        <rect x="14" y="14" width="7" height="7" rx="1" fill="white" opacity="0.9"/>
                                        <circle cx="6.5" cy="6.5" r="1.5" fill="rgba(102, 126, 234, 0.8)"/>
                                        <circle cx="17.5" cy="6.5" r="1.5" fill="rgba(102, 126, 234, 0.8)"/>
                                        <circle cx="6.5" cy="17.5" r="1.5" fill="rgba(102, 126, 234, 0.8)"/>
                                        <circle cx="17.5" cy="17.5" r="1.5" fill="rgba(102, 126, 234, 0.8)"/>
                                    </svg>
                                    VOLTAR
                                </a>
                                <button type="submit" class="btn btn-success neural-btn">
                                    <i class="fas fa-save me-2"></i>Gerar PDF
                                </button>
                            </div>
                        </div>
                    </form>
                    
                    <!-- Navigation Icons -->
                    <div class="d-flex justify-content-center gap-3 mt-4">
                        <a href="{{ url_for('receita.receita') }}" class="btn btn-outline-primary glass-button" 
                           style="border-radius: 15px; padding: 12px 20px;">
                            <i class="fas fa-prescription me-2"></i>Nova Receita
                        </a>
                        <a href="{{ url_for('exames_img.exames_img') }}" class="btn btn-outline-info glass-button"
                           style="border-radius: 15px; padding: 12px 20px;">
                            <i class="fas fa-x-ray me-2"></i>Exames de Imagem
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Set current date as default
    const dateInput = document.getElementById('data');
    if (!dateInput.value) {
        const today = new Date();
        const formattedDate = today.getFullYear() + '-' + 
            String(today.getMonth() + 1).padStart(2, '0') + '-' + 
            String(today.getDate()).padStart(2, '0');
        dateInput.value = formattedDate;
    }
    
    // Force pre-selection of essential exams if not refazer mode
    const urlParams = new URLSearchParams(window.location.search);
    const isRefazer = urlParams.has('refazer') || window.location.pathname.includes('/refazer/');
    
    if (!isRefazer) {
        const essentialExams = [
            'Hemograma completo',
            'Coagulograma (TAP/TTPA)',
            'HbA1c (Hemoglobina glicada)',
            'Glicemia de jejum',
            'TGO (AST)',
            'TGP (ALT)',
            'Ureia',
            'Creatinina',
            'Ferritina',
            'Colesterol total e frações',
            'Triglicerídeos',
            'Ácido úrico',
            'Proteína C reativa (PCR)',
            'T4 livre',
            'TSH',
            'Testosterona total',
            'FSH',
            'Exame de urina (EAS)',
            'Urina 1',
            'PSA'
        ];
        
        essentialExams.forEach(examName => {
            const checkbox = document.querySelector(`input[name="exames[]"][value="${examName}"]`);
            if (checkbox) {
                checkbox.checked = true;
            }
        });
    }
    
    // Search functionality
    const searchInput = document.getElementById('examSearch');
    const checkboxes = document.querySelectorAll('input[type="checkbox"][name="exames[]"]');
    
    searchInput.addEventListener('input', function() {
        const searchTerm = this.value.toLowerCase();
        
        checkboxes.forEach(checkbox => {
            const label = checkbox.nextElementSibling.textContent.toLowerCase();
            const container = checkbox.closest('.col-12');
            
            if (label.includes(searchTerm) || searchTerm === '') {
                container.style.display = 'block';
            } else {
                container.style.display = 'none';
            }
        });
    });
    
    // Load custom exams on page load
    carregarExamesPersonalizados();
});

// Functions for custom exams management
function carregarExamesPersonalizados() {
    fetch('/api/listar_exames_personalizados/laboratorial')
        .then(response => response.json())
        .then(data => {
            if (data.success && data.exames.length > 0) {
                const container = document.getElementById('examesPersonalizadosContainer');
                container.innerHTML = '';
                
                data.exames.forEach(exame => {
                    const examDiv = document.createElement('div');
                    examDiv.className = 'col-md-6 mb-2';
                    examDiv.innerHTML = `
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="exames[]" 
                                   value="${exame.nome}" id="exame_custom_${exame.id}">
                            <label class="form-check-label text-light" for="exame_custom_${exame.id}">
                                ${exame.nome}
                            </label>
                            <button type="button" class="btn btn-sm btn-outline-danger ms-2" 
                                    onclick="removerExamePersonalizado(${exame.id})" 
                                    title="Remover exame">
                                <i class="fas fa-trash fa-xs"></i>
                            </button>
                        </div>
                    `;
                    container.appendChild(examDiv);
                });
            }
        })
        .catch(error => console.error('Erro ao carregar exames personalizados:', error));
}

function abrirModalExamesPersonalizados() {
    const modal = new bootstrap.Modal(document.getElementById('modalExamesPersonalizados'));
    modal.show();
}

function adicionarExamePersonalizado() {
    const nomeExame = document.getElementById('nomeNovoExame').value.trim();
    const categoria = document.getElementById('categoriaNovoExame').value.trim();
    
    if (!nomeExame) {
        alert('Por favor, digite o nome do exame.');
        return;
    }
    
    const formData = new FormData();
    formData.append('nome_exame', nomeExame);
    formData.append('tipo_exame', 'laboratorial');
    formData.append('categoria', categoria);
    
    fetch('/api/adicionar_exame_personalizado', {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            document.getElementById('nomeNovoExame').value = '';
            document.getElementById('categoriaNovoExame').value = '';
            carregarExamesPersonalizados();
            const modal = bootstrap.Modal.getInstance(document.getElementById('modalExamesPersonalizados'));
            modal.hide();
        } else {
            alert(data.message || 'Erro ao adicionar exame');
        }
    })
    .catch(error => {
        console.error('Erro:', error);
        alert('Erro ao adicionar exame');
    });
}

function removerExamePersonalizado(exameId) {
    if (confirm('Tem certeza que deseja remover este exame?')) {
        fetch(`/api/remover_exame_personalizado/${exameId}`, {
            method: 'DELETE'
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                carregarExamesPersonalizados();
            } else {
                alert(data.message || 'Erro ao remover exame');
            }
        })
        .catch(error => {
            console.error('Erro:', error);
            alert('Erro ao remover exame');
        });
    }
}
</script>

<!-- Modal para Gerenciar Exames Personalizados -->
<div class="modal fade" id="modalExamesPersonalizados" tabindex="-1" aria-labelledby="modalExamesPersonalizadosLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content" style="background: rgba(30, 41, 59, 0.95); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1);">
            <div class="modal-header border-bottom border-secondary">
                <h5 class="modal-title text-light" id="modalExamesPersonalizadosLabel">
                    <i class="fas fa-user-cog me-2"></i>Gerenciar Exames Laboratoriais Personalizados
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row mb-4">
                    <div class="col-12">
                        <h6 class="text-primary mb-3">Adicionar Novo Exame</h6>
                        <div class="row">
                            <div class="col-md-8 mb-3">
                                <label for="nomeNovoExame" class="form-label text-light">Nome do Exame</label>
                                <input type="text" class="form-control glass-input" id="nomeNovoExame" 
                                       placeholder="Ex: Exame específico customizado">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="categoriaNovoExame" class="form-label text-light">Categoria (Opcional)</label>
                                <input type="text" class="form-control glass-input" id="categoriaNovoExame" 
                                       placeholder="Ex: Hematologia">
                            </div>
                        </div>
                        <button type="button" class="btn btn-success neural-btn" onclick="adicionarExamePersonalizado()">
                            <i class="fas fa-plus me-2"></i>Adicionar Exame
                        </button>
                    </div>
                </div>
                
                <div class="row">
                    <div class="col-12">
                        <h6 class="text-info mb-3">Exames Personalizados Existentes</h6>
                        <div id="listaExamesPersonalizadosModal">
                            <!-- Lista será carregada via JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer border-top border-secondary">
                <button type="button" class="btn btn-secondary neural-btn" data-bs-dismiss="modal">Fechar</button>
            </div>
        </div>
    </div>
</div>

{% endblock %}